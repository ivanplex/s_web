function Particle(i,t,o){this.init(i,t,o)}Particle.prototype={init:function(i,t,o){this.alive=!0,this.radius=o||10,this.wander=.15,this.theta=random(TWO_PI),this.drag=.92,this.color="#fff",this.x=i||0,this.y=t||0,this.vx=0,this.vy=0},move:function(){this.x+=this.vx,this.y+=this.vy,this.vx*=this.drag,this.vy*=this.drag,this.theta+=random(-.5,.5)*this.wander,this.vx+=.1*sin(this.theta),this.vy+=.1*cos(this.theta),this.radius*=.96,this.alive=this.radius>.5},draw:function(i){i.beginPath(),i.arc(this.x,this.y,this.radius,0,TWO_PI),i.fillStyle=this.color,i.fill()}};var MAX_PARTICLES=100,COLOURS=["#69D2E7","#A7DBD8","#E0E4CC","#F38630","#FA6900","#FF4E50","#F9D423"],particles=[],pool=[],demo=Sketch.create({container:document.getElementById("container"),retina:"auto"});demo.setup=function(){var i,t,o;for(i=0;i<20;i++)t=.5*demo.width+random(-100,100),o=.5*demo.height+random(-100,100),demo.spawn(t,o)},demo.spawn=function(i,t){var o,a,n;particles.length>=MAX_PARTICLES&&pool.push(particles.shift()),(o=pool.length?pool.pop():new Particle).init(i,t,random(5,40)),o.wander=random(.5,2),o.color=random(COLOURS),o.drag=random(.9,.99),a=random(TWO_PI),n=random(2,8),o.vx=sin(a)*n,o.vy=cos(a)*n,particles.push(o)},demo.update=function(){var i,t;for(i=particles.length-1;i>=0;i--)(t=particles[i]).alive?t.move():pool.push(particles.splice(i,1)[0])},demo.draw=function(){demo.globalCompositeOperation="lighter";for(var i=particles.length-1;i>=0;i--)particles[i].draw(demo)};var i=0,actionInterval=60,forward=!0;actionSeperation=parseInt(window.innerWidth/actionInterval),setInterval(function(){demo.spawn(i*actionSeperation,560+80*sin(i)),demo.spawn(i*actionSeperation,560+80*sin(i)),demo.spawn(i*actionSeperation,560+80*sin(i)),forward?i++:i--,i>actionInterval&&1==forward?forward=!1:i<0&&0==forward&&(forward=!0),console.log(i)},100),setInterval(function(){demo.spawn(random(0,window.innerWidth),random(0,500))},100);